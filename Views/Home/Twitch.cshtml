@model List<FGCSerbiaWeb.Models.TwitchChannel>
@{
    ViewData["Title"] = "Twitch";
}

<div class="row">
    @{
        int i = 1;
        foreach (var stream in Model)
        {
            string id = "twitch-embed" + i;
            <div id="@id" class="col-lg-6 col-md-6 twitch-embed">

                <!-- Load the Twitch embed script -->
                <script src="https://embed.twitch.tv/embed/v1.js"></script>

                <!-- Create a Twitch.Embed object that will render within the "twitch-embed" root element. -->
                <script type="text/javascript">
                    var embed = new Twitch.Embed("@id", {
                        width: "100%",
                        height: "90%",
                        channel: "@stream.user_name",
                        layout: "video",
                        autoplay: false
                    });

                    embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
                        var player = embed.getPlayer();
                        //player.play();
                    });
                </script>
                <p>Streamer: @stream.user_name</p>
            </div>
            i++;
        }
    }
</div>